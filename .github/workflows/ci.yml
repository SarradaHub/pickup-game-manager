name: CI

on:
  pull_request:
  push:
    branches: [ main ]

jobs:
  rails-ci:
    uses: SarradaHub/platform/.github/workflows/rails-service-ci.yaml@main
    with:
      working-directory: .
      ruby-version: '3.3.6'
      run-brakeman: true
      run-importmap-audit: true
      run-rubycritic: true
      postgres-db: pickup_game_manager_test
      rspec-command: bin/rails db:test:prepare && bundle exec rspec
      extra-apt-packages: "google-chrome-stable"
